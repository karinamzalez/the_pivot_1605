.row.column.text-center
  %h2.banner{:style => "font-family: fantasy; margin: auto; margin-top: 10px;"} Your Bucket
  %hr/
  .gnome_bucket
    %table.hover
      %thead
        %tr
          %th{:width => "300"} Image
          %th{:width => "300"} Item
          %th{:width => "300"} Price
          %th{:width => "300"} Quantity
          %th{:width => "300"} Decrease Quantity
          %th{:width => "300"} Increase Quantity
          %th{:width => "300"} Remove
          %th{:width => "300"} Subtotal
      %tbody
        - @bucket.populated_contents.each do | gnome |
          %tr
            %td
              %div{:id => "gnome_#{gnome.id}"}
                %img.gnome-image{:alt => "...", :src => "https://pixabay.com/static/uploads/photo/2014/12/21/23/58/gnome-576496_960_720.png"}/
                = image_tag(gnome.image_url)
            %td
              = link_to gnome.name, gnome_path(gnome)
            %td
              %p= (gnome.price * 100).round / 100.0
            %td
              %p Quantity: #{gnome.quantity}
            %td
              = link_to "Decrease quantity", bucket_gnome_path(gnome.id, :function => "decrease"), method: :put
            %td
              = link_to "Increase quantity", bucket_gnome_path(gnome.id, :function => "increase"), method: :put
            %td
              = link_to "Remove from cart", bucket_gnome_path(gnome.id), method: :delete
            %td
              %p $#{gnome.subtotal}
        %tr
          %td
          %td
          %td
          %td
          %td
          %td
          %td{:width => "400"} Total Price:
          %td $#{@bucket.total}


  - if current_user && !@bucket.empty?
    = button_to 'Checkout', orders_path
  -elsif current_user && @bucket.empty?
    %p Your bucket is empty!
    = link_to "Get some gnomes!", gnomes_path
  - else
    %p
      = link_to 'Login', login_path
      or #{link_to 'Create Account', new_user_path} to checkout
